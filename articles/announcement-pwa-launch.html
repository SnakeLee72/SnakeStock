<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>【重磅升級】您的「靈蛇週報」App 來了！</title>
    <link rel="manifest" href="/SnakeStock/manifest.json">
    
    <meta name="description" content="了解如何將靈蛇週報網站「安裝」至您的手機桌面，享受如App般的快速啟動、全螢幕沉浸式閱讀與離線複盤體驗。">
    <meta name="keywords" content="靈蛇週報, PWA, Web App, 安裝, App, 離線閱讀">

    <meta property="og:title" content="【重磅升級】您的「靈蛇週報」App 來了！" />
    <meta property="og:description" content="了解如何將靈蛇週報網站「安裝」至您的手機桌面，享受如App般的快速啟動、全螢幕沉浸式閱讀與離線複盤體驗。" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://snakelee72.github.io/SnakeStock/articles/announcement-pwa-launch.html" />
    <meta property="og:image" content="https://snakelee72.github.io/SnakeStock/images/og-image-pwa-launch.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/SnakeStock/sw.js').then(registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        :root { --bg-dark-ai: #0a0a1a; --bg-card: #101024; --border-color: #2a2a4a; --text-primary: #e6e6fa; --text-secondary: #a0a0c0; --accent-blue: #00d1ff; --color-green: #50fa7b; --line-green: #06C755; --facebook-blue: #1877F2; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--bg-dark-ai); color: var(--text-primary); margin: 0; padding: 10px; line-height: 1.8; }
        .container { max-width: 900px; margin: 10px auto; padding: 15px; }
        header { text-align: center; padding-bottom: 20px; margin-bottom: 30px; }
        header h1 { color: var(--accent-blue); font-size: 2.5em; margin: 0; }
        .content-card { background-color: var(--bg-card); border-radius: 8px; padding: 30px; margin-bottom: 25px; border: 1px solid var(--border-color); }
        .content-card h2 { font-size: 1.6em; color: var(--accent-blue); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        .content-card h3 { font-size: 1.3em; color: var(--text-primary); }
        .content-card p, .content-card li { color: var(--text-secondary); }
        /* --- New styles for install button --- */
        .install-cta-card { text-align: center; }
        .install-button {
            display: inline-block;
            background-color: var(--accent-blue);
            color: #0a0a1a;
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.2em;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        .install-button:hover { background-color: #fff; transform: scale(1.05); }
        #installMessage { color: var(--color-green); font-weight: bold; margin-top: 15px; }
        .install-steps { list-style-type: decimal; padding-left: 20px; }
        .install-steps li { margin-bottom: 10px; }
        .share-container { text-align: center; padding: 20px; background-color: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-color); }
        .share-buttons { display: flex; justify-content: center; gap: 15px; margin-top: 15px; flex-wrap: wrap; }
        .share-button-line, .share-button-fb, .share-button-copy { display: inline-block; padding: 10px 20px; border-radius: 20px; text-decoration: none; color: white; font-weight: bold; transition: opacity 0.3s; border: none; cursor: pointer; font-size: 1em;}
        .share-button-line { background-color: var(--line-green); }
        .share-button-fb { background-color: var(--facebook-blue); }
        .share-button-copy { background-color: var(--text-secondary); }
        .share-button-line:hover, .share-button-fb:hover, .share-button-copy:hover { opacity: 0.8; }
        .site-footer { text-align: center; margin-top: 50px; padding-top: 30px; border-top: 1px solid var(--border-color); color: var(--text-secondary); font-size: 0.9em; }
        .footer-links { margin-bottom: 15px; }
        .footer-links a { color: var(--text-secondary); text-decoration: none; margin: 0 15px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>【重磅升級】您的「靈蛇週報」App 來了！</h1>
            <p style="color: var(--text-secondary);">發布日期：2025年8月8日</p>
        </header>
        
        <section class="content-card install-cta-card">
            <h2>一鍵安裝至桌面</h2>
            <p>在支援的瀏覽器上，點擊下方按鈕，即可將「靈蛇週報」直接安裝至您的裝置！</p>
            <button id="installPwaButton" class="install-button" style="display: none;">🚀 立即安裝 App</button>
            <p id="installMessage"></p>
        </section>
        <section class="content-card">
            <p>為了提供所有忠實讀者更極致、更便捷的閱讀體驗，我們今天非常興奮地宣布，「靈蛇週報」網站正式支援 **新世代網頁 App (PWA)** 功能！</p>
            <p>現在，您可以將我們的專業分析報告，像 App 一樣「安裝」到您的手機主畫面上，享受前所未有的便利性與沉浸感。</p>
        </section>

        <section class="content-card">
            <h2>PWA 能帶來哪些好處？</h2>
            <h3>🚀 一鍵快速啟動</h3>
            <p>不再需要打開瀏覽器、輸入網址。只需在手機桌面上點擊「靈蛇週報」的專屬圖示，即可在數秒內直達我們的網站。</p>
            <h3>📖 全螢幕沉浸式閱讀</h3>
            <p>安裝後，網站將以全螢幕模式開啟，自動隱藏瀏覽器惱人的網址列與工具列，讓您能更專注地閱讀。</p>
            <h3>✈️ 離線閱讀，隨時複盤</h3>
            <p>您可以隨時打開 App，閱讀您**曾經瀏覽過**的歷史報告與個股追蹤頁面，即使在沒有網路的環境下也沒問題。</p>
            <h3>🔄 永遠保持最新</h3>
            <p>您不需要前往 App Store 更新。只要在有網路的環境下開啟它，App 就會自動更新到最新內容。</p>
        </section>

        <section class="content-card">
            <h2>手動安裝教學</h2>
            <p>如果上方未出現「立即安裝」按鈕，您也可以依照瀏覽器的指示手動安裝：</p>
            <h3>📱 Android 用戶 (Chrome 瀏覽器)</h3>
            <ol class="install-steps">
                <li>用 Chrome 瀏覽器打開我們的網站。</li>
                <li>瀏覽器可能會**自動跳出「新增至主畫面」**的提示，請點擊「安裝」。</li>
                <li>如果沒有提示，請點擊右上角的「選單」圖示 (三個點)，然後選擇「**安裝應用程式**」。</li>
            </ol>
            <h3>📱 iPhone 用戶 (Safari 瀏覽器)</h3>
            <ol class="install-steps">
                <li>用 Safari 瀏覽器打開我們的網站。</li>
                <li>點擊下方工具列中間的「**分享**」按鈕 (圖示為 ⬆️)。</li>
                <li>在跳出的選單中，向下滑動，找到並點擊「**加入主畫面**」。</li>
                <li>確認名稱與圖示後，點擊右上角的「**新增**」。</li>
            </ol>
        </section>

        <section class="share-container">
            <p>喜歡這個新功能嗎？分享給您的朋友吧！</p>
            <div class="share-buttons">
                <a id="shareLine" href="#" target="_blank" class="share-button-line">分享到 Line</a>
                <a id="shareFb" href="#" target="_blank" class="share-button-fb">分享到 Facebook</a>
                <button id="copyLink" class="share-button-copy">複製連結</button>
            </div>
        </section>
        
        <footer class="site-footer">
             <div class="footer-links">
                <a href="/SnakeStock/index.html">返回首頁</a>
                <a href="/SnakeStock/about.html">關於我們</a>
                <a href="/SnakeStock/dashboard.html">個股儀表板</a>
                <a href="/SnakeStock/glossary.html">投資術語庫</a>
                <a href="/SnakeStock/disclaimer.html">免責聲明</a>
            </div>
            <p>&copy; 2025 靈蛇研究團隊謹製</p>
        </footer>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Share Button Logic ---
        const pageUrl = 'https://snakelee72.github.io/SnakeStock/articles/announcement-pwa-launch.html';
        const shareLine = document.getElementById('shareLine');
        if (shareLine) { shareLine.href = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(pageUrl)}`; }
        const shareFb = document.getElementById('shareFb');
        if (shareFb) { shareFb.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageUrl)}`; }
        const copyLink = document.getElementById('copyLink');
        if (copyLink) {
            copyLink.addEventListener('click', function() {
                navigator.clipboard.writeText(pageUrl).then(() => {
                    copyLink.textContent = '已複製！';
                    setTimeout(() => { copyLink.textContent = '複製連結'; }, 2000);
                }).catch(err => { console.error('複製失敗: ', err); });
            });
        }

        // --- PWA Installation Logic ---
        let deferredPrompt;
        const installButton = document.getElementById('installPwaButton');
        const installMessage = document.getElementById('installMessage');

        window.addEventListener('beforeinstallprompt', (e) => {
            // 防止 Chrome 67 以下版本自動顯示安裝提示
            e.preventDefault();
            // 儲存事件，以便稍後觸發
            deferredPrompt = e;
            // 顯示我們自訂的安裝按鈕
            if(installButton) {
                installButton.style.display = 'inline-block';
            }
        });

        if(installButton) {
            installButton.addEventListener('click', async () => {
                if (deferredPrompt) {
                    // 觸發安裝提示
                    deferredPrompt.prompt();
                    // 等待使用者的回應
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (outcome === 'accepted') {
                        console.log('User accepted the A2HS prompt');
                        if(installMessage) {
                            installMessage.textContent = '安裝成功！您現在可以從桌面啟動。';
                        }
                    } else {
                        console.log('User dismissed the A2HS prompt');
                    }
                    // 無論結果如何，都將 deferredPrompt 設為 null，因為它只能使用一次
                    deferredPrompt = null;
                    // 隱藏按鈕
                    installButton.style.display = 'none';
                }
            });
        }
        
        window.addEventListener('appinstalled', (evt) => {
            console.log('a2hs installed');
            if(installMessage) {
                installMessage.textContent = 'App 已成功安裝！';
            }
        });
    });
</script>
</body>
</html>
